# concept: SuggestChord
*   **concept**: SuggestChord [Progression]
*   **purpose**: offer users suggestions for suitable chords and progressions based on preferences
*   **principle**: a user will select a progression that they would like to apply their preferences to. The user can set their prefered genre, complexity level, and key of the progression as context for chord suggestion. The user can then either generate a whole progression or can generate suggestions for a single chord in the progression.
*   **state**:
    *   A set of `ProgressionSuggestionPreferences` with
        *   A `progression` of type `Progression`
        *   A `preferredGenre` of type `String`, default `Pop`
        *   A `complexityLevel` of type `String`, default `Basic`
        *   A `key` of type `String`, default `Cmaj`

*   **actions**:
    *   `initializePreferences(progression: Progression): (progressionSuggestionPreferences: ProgressionSuggestionPreferences)`
        *   **requires**: `progression` does not exist in ProgressionSuggestionPreferences
        *   **effect**: creates a new `ProgressionSuggestionPreferences` for `progression` with default values for `preferredGenre`, `complexityLevel`, and `key`.
    *   `setPreferredGenre(progression: Progression, preferredGenre: String)`
        *   **requires**: `progression` exists in `ProgressionSuggestionPreferences`
        *   **effect**: updates the `ProgressionSuggestionPreferences` for `progression` with the given `genre`.
    *   `setComplexityLevel(progression: Progression, complexityLevel: String)`
        *   **requires**: `progression` exists in `ProgressionSuggestionPreferences`
        *   **effect**: updates the `ProgressionSuggestionPreferences` for `progression` with the given `complexityLevel`.
    *   `setKey(progression: Progression, key: String)`
        *   **requires**: `progression` exists in `ProgressionSuggestionPreferences`
        *   **effect**: updates the `ProgressionSuggestionPreferences` for `progression` with the given `key`.
    *   `getProgressionPreferences(progression: Progression): (progressionPreferences: ProgressionSuggestionPreferences)`
        *   **effect**: returns the `ProgressionSuggestionPreferences` for `progression`.
    *   `suggestChord(progression: Progression, chords: (String | null)[], position: Number): (suggestedChords: String[])`
        *   **requires**: `progression` exists in `ProgressionSuggestionPreferences`, `0 <= position < chords.length`
        *   **effect**: returns a list of suggested chords to put in `position` in `chords`, generated by an LLM given the context the `ProgressionSuggestionPreferences` for `progression` and the chords before and after it.
    *   `suggestProgression(progression: Progression, length: Number): (chordSequence: String[])`
        *   **requires**: `progression` exists in `ProgressionSuggestionPreferences`, `length > 0`
        *   **effect**: returns a chord progression of length `length`, generated by an LLM given the context the `ProgressionSuggestionPreferences` for `progression`.