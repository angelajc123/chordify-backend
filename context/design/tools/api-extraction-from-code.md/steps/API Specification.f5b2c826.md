---
timestamp: 'Tue Oct 21 2025 14:58:07 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251021_145807.0e0d166e.md]]'
content_id: f5b2c82673128afb9d2d0d6deef7914da16765a93c3f890f18edc73497a6b0cb
---

# API Specification: SuggestChord Concept

**Purpose:** offer users suggestions for suitable chords and progressions based on preferences

***

## API Endpoints

### POST /api/SuggestChord/initializePreferences

**Description:** Action: Initializes preferences for chord suggestions for a given progression.

**Requirements:**

* progression does not exist in SuggestionPreferences

**Effects:**

* creates a new SuggestionPreferences for progression with default values for preferredGenre, complexityLevel, and key.

**Request Body:**

```json
{
  "progressionId": "string"
}
```

**Success Response Body (Action):**

```json
{
  "_id": "string",
  "preferredGenre": "string",
  "complexityLevel": "string",
  "key": "string"
}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/setPreferredGenre

**Description:** Action: Sets the preferred genre for a progression's chord suggestions.

**Requirements:**

* progression exists in SuggestionPreferences

**Effects:**

* updates the SuggestionPreferences for progression with the given genre.

**Request Body:**

```json
{
  "progressionId": "string",
  "preferredGenre": "string"
}
```

**Success Response Body (Action):**

```json
{}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/setComplexityLevel

**Description:** Action: Sets the complexity level for a progression's chord suggestions.

**Requirements:**

* progression exists in SuggestionPreferences

**Effects:**

* updates the SuggestionPreferences for progression with the given complexityLevel.

**Request Body:**

```json
{
  "progressionId": "string",
  "complexityLevel": "string"
}
```

**Success Response Body (Action):**

```json
{}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/setKey

**Description:** Action: Sets the musical key for a progression's chord suggestions.

**Requirements:**

* progression exists in SuggestionPreferences

**Effects:**

* updates the SuggestionPreferences for progression with the given key.

**Request Body:**

```json
{
  "progressionId": "string",
  "key": "string"
}
```

**Success Response Body (Action):**

```json
{}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/getProgressionPreferences

**Description:** Action: Retrieves the suggestion preferences for a specific progression. (Note: Although described as an action, the method name is `getProgressionPreferences` and not prefixed with `_`, thus follows action response rules, returning a single object.)

**Requirements:**

* progression exists in SuggestionPreferences

**Effects:**

* returns the SuggestionPreferences for progression.

**Request Body:**

```json
{
  "progressionId": "string"
}
```

**Success Response Body (Action):**

```json
{
  "progressionPreferences": {
    "_id": "string",
    "preferredGenre": "string",
    "complexityLevel": "string",
    "key": "string"
  }
}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/suggestChord

**Description:** Action: Suggests a list of suitable chords for a specific position in a progression, based on user preferences and context.

**Requirements:**

* progression exists in SuggestionPreferences, 0 <= position < chords.length

**Effects:**

* returns a list of suggested chords to put in position in chords, generated by an LLM given the context of the SuggestionPreferences for progression and the chords before and after it.

**Request Body:**

```json
{
  "progressionId": "string",
  "chords": ["string" | null],
  "position": "number"
}
```

**Success Response Body (Action):**

```json
{
  "suggestedChords": ["string"]
}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

### POST /api/SuggestChord/suggestProgression

**Description:** Action: Generates a complete chord progression of a specified length, based on user preferences.

**Requirements:**

* progression exists in SuggestionPreferences, length > 0

**Effects:**

* returns a chord progression of length length, generated by an LLM given the context of the SuggestionPreferences for progression.

**Request Body:**

```json
{
  "progressionId": "string",
  "length": "number"
}
```

**Success Response Body (Action):**

```json
{
  "chordSequence": ["string"]
}
```

**Error Response Body:**

```json
{
  "error": "string"
}
```

***

```

# prompt: Can you make sure the field names are correct? "progression" should be "progressionId".
```
